#!/usr/bin/env zsh

source "${0:A:h}/../.internal/path.zsh"
source "$DOTFILES_PATH/.internal/git.zsh"

function() {
  local cmd=""

  if [[ ! -s "$HOME/.vim/autoload/plug.vim" ]]; then
    curl -fLo "$DOTFILES_PATH/vim/plug.symlink" --create-dirs https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
  else
    cmd="PlugUpgrade |"
  fi

  vim -c "$cmd PlugUpdate | \$quit"

  if doDotfilesUseGit; then
    git update-index --assume-unchanged $DOTFILES_PATH/vim/plug.symlink
  fi
}
